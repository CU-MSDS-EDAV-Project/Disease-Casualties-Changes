[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Deaths of Different Diseases",
    "section": "",
    "text": "1 Introduction\nSince the COVID-19 outbreak, many people have died due to the disease. In order to survive and maintain healthy, people may have gradually changed their mindset and hygiene habits accordingly. Owing to this potential change, we are interested in finding if there are any changes to disease casualties and other plausible factors that might also cause the changes.\nWe first started researching diseases transmitted through similar manners i.e. influenza and pneumonia. We would like to explore whether the emergence of COVID-19 affected the prevalence of casualties in influenza or/and pneumonia before and after the COVID-19 outbreak. Specifically, we are interested in the following aspects of the questions:\n- How is the change reflected nationally over the time frame from 2019 to 2021?\n- How is the change reflected across different regions such as states? Does it have similar trends among states with the top casualties?\nAfter focusing on influenza and pneumonia, we would like to know the current prevalence of other disease casualties as a whole and individually. For instance, how are the counts of the total deaths spread out in the following categories:\n1. Natural cause\n2. Septicemia\n3. Malignant neoplasms\n4. Diabetes mellitus\n5. Alzheimer disease\n6. Influenza and pneumonia\n7. Respiratory diseases (Combine lower respiratory with other respiratory ones)\n8. Diseases of heart\n9. Cerebrovascular diseases\nWith the exploration into various diseases’ casualties, it is worthwhile to consider if national coverage of the vaccines affects disease casualties. For example, do states with the lowest casualties have the higher or highest vaccination coverage as compared to other states?\nWhile assorted types of static graph could literally offer us comprehensive understanding and overview of the our data, some simple dynamic graphs of interactions with readers still brings novel idea and impression on our data."
  },
  {
    "objectID": "data.html#description",
    "href": "data.html#description",
    "title": "2  Data",
    "section": "2.1 Description",
    "text": "2.1 Description\nTo find out whether there are any changes to disease casualties and other plausible factors that might also cause the changes, we collected several datasets from Centers for Disease Control and Prevention. Thanks to the easy access to the data by the Centers for Disease Control and Prevention, the datasets are all downloadable in csv file types. Thus, we first downloaded the data and then uploaded to the “data” folder in the working directory of the project for convenience of data cleaning, processing and visualizing.\nData Source 1: Pneumonia and Influenza Mortality Surveillance\nThe first one is “Pneumonia and Influenza Mortality Surveillance” from National Center for Health Statistics (NCHS) Mortality Surveillance System, a table of dimension 19345 by 14 when choosing state data. The data sources are collected by NCHS through State Vital Statistics Offices across the United States. The deaths which is confirmed through death certificate include multiple causes associated with influenza, pneumonia, or COVID. Because the data are collected weekly, they are updated and aggregated by weeks and will be displayed from 1 to 52 through a complete year. Note that the value total deaths include all the frequency based on ICD-10 multiple cause of death so it doesn’t equal to the sum of deaths from influenza, pneumonia and COVID-19 only.\nData Source 2: Weekly Provisional Counts of Deaths by State and Select Causes, 2020-2023\nThe second one is “Weekly Provisional Counts of Deaths by State and Select Causes, 2020-2023” by National Center for Health Statistics (NCHS), a table of dimension 10477 by 20. The data is collected by NCHS through the Vital Statistics Cooperative Program and updated as of September 27, 2023. The mortality data are based on the death certificates in all the states include counts of death by cause, week and state but they excludes the nonresidents and fetus. Notice that the provisional deaths are based on the flow of the mortality data in the National Vital Statistics System so there is a time lapse between the time deaths occur and the time to submit and eventually reflected on the system. Also, we need to be aware that the cause of the death classification is categorized by ICD-10 codes. So the total values of deaths is not equal to the sum of the listed deaths in other categories.\nData Source 3: Weekly Cumulative Influenza Vaccination Coverage-Youth;Adult\nThe final ones are “Weekly Cumulative Influenza Vaccination Coverage, Children 6 months through 18 years, United States” with dimension of 9895 by 28 and “Weekly Cumulative Influenza Vaccination Coverage, Adults 18 and Older United States” with dimension of 4836 by 22 from National Center for Immunization and Respiratory Diseases (NCIRD). The data are updated regularly throughout the flu seasons whenever new data are available. The influenza vaccination coverage is assessed through the National Immunization Survey - Adult COVID Module (NIS-ACM) providing weekly influenza vaccination coverage estimates. Notice that the weekly influenza surveillance report is prepared by the Influenza Division so the data are subject to the changes according the the reports received."
  },
  {
    "objectID": "data.html#research-plan",
    "href": "data.html#research-plan",
    "title": "2  Data",
    "section": "2.2 Research Plan",
    "text": "2.2 Research Plan\nWe first load the required libraries for loading, cleaning and processing data for all the datasets.\n\n\nCode\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(reshape2)\nlibrary(gridExtra)\nlibrary(stringr)\nlibrary(tidyverse)\n\n\nSince all data sets are collected weekly, it is intuitive to merge the data across different sources and then group them by states or by weeks in general sense. We may clean and process data by keeping variables indicating weeks, states, ages, and deaths of influenza or/and pneumonia to demonstrate what are the changes before and after the COVID-19 outbreak. Depending on the graphs’ needs and availability of data, we could potentially extend the range of data from comparing year 2019 with year 2022 to a wider range of year such as from year 2018 to 2019 and with those from 2021 to 2023. With larger pool of the data points, it is more likely to show the effects of COVID-19 on the casualties of diseases of interest. A brief show of dataset 1 without any merging is as follows:\n\n\nCode\ndf1 = read.csv('data/data1.csv')\ndf1_filter = df1 %&gt;% select('SUB.AREA','SEASON','AGE.GROUP','WEEK','NUM.INFLUENZA.DEATHS','NUM.PNEUMONIA.DEATHS','NUM.COVID.19.DEATHS','TOTAL.DEATHS')\ncolnames(df1_filter) &lt;- c('state','season','age_group','week','influenza','pneumonia','covid','total')\nhead(df1_filter)\n\n\n    state  season age_group week influenza pneumonia covid total\n1 Alabama 2023-24       All   40         0        37    18   961\n2 Alabama 2023-24       All   41         0        60    19   987\n3 Alabama 2023-24       All   42         0        43    12   927\n4 Alabama 2023-24       All   43         1        46     6   897\n5 Alabama 2023-24       All   44         1        40    16   825\n6 Alabama 2023-24       All   45         0        31    10   607\n\n\nAfter examining the trends of specific diseases, it is reasonable to apply the same logic to other diseases of interest. However, instead of comparing before and after disease outbreak individually, we are comparing horizontally across different kinds of disease to show how the total deaths spread out in different categories using heatmaps of 10 including one with total casualties as a reference while each of rest is representing a category and its death frequency. A quick overview of our dataset 2 is:\n\n\nCode\ndf2 = read.csv('data/data2.csv')\ndf2_filter = df2 %&gt;% select('MMWR.Year','MMWR.Week','All.Cause','Natural.Cause','Septicemia..A40.A41.','Malignant.neoplasms..C00.C97.','Diabetes.mellitus..E10.E14.','Alzheimer.disease..G30.','Influenza.and.pneumonia..J09.J18.','Chronic.lower.respiratory.diseases..J40.J47.','Other.diseases.of.respiratory.system..J00.J06.J30.J39.J67.J70.J98.','Nephritis..nephrotic.syndrome.and.nephrosis..N00.N07.N17.N19.N25.N27.','Symptoms..signs.and.abnormal.clinical.and.laboratory.findings..not.elsewhere.classified..R00.R99.','Diseases.of.heart..I00.I09.I11.I13.I20.I51.','Cerebrovascular.diseases..I60.I69.','COVID.19..U071..Multiple.Cause.of.Death.','COVID.19..U071..Underlying.Cause.of.Death.')\ncolnames(df2_filter) &lt;- c('year','week','all_cause','natural','septicemia','neoplasms','miabete','alzheimer','influenza/pneumonia','lower_respiratory','other_respiratory','nephritis','abnormal','heart','cerebrovascular','covid_multiple','covid_underlying')\nhead(df2_filter)\n\n\n  year week all_cause natural septicemia neoplasms miabete alzheimer\n1 2020    1     60179   55010        843     11567    1829      2537\n2 2020    2     60735   55755        861     11963    1942      2566\n3 2020    3     59363   54516        829     11701    1819      2491\n4 2020    4     59162   54401        828     11879    1864      2517\n5 2020    5     58834   54001        811     11963    1828      2480\n6 2020    6     59491   54416        806     11704    1957      2515\n  influenza/pneumonia lower_respiratory other_respiratory nephritis abnormal\n1                1559              3501              1068      1094      630\n2                1528              3708              1035      1092      649\n3                1484              3526               992      1121      612\n4                1488              3403               979      1107      638\n5                1411              3313               981      1074      616\n6                1463              3413               975      1135      600\n  heart cerebrovascular covid_multiple covid_underlying\n1 14204            3110              0                0\n2 13911            3189              1                1\n3 13593            3256              2                1\n4 13612            3185              3                2\n5 13465            3084              0                0\n6 14005            3056              4                3\n\n\nAlthough alert of the risks for assorted disease casualties is a good start, we still need some kinds to actions to combat or counteract with such situations. The most common solution to such challenges is through immunization. We would like to discover the correlation between vaccine coverage and deaths. According to our common sense and public education on vaccination, we would expect to have a negative relationship. However, it remains to be verified by a scatter plot of vaccination coverage versus casualties of different diseases grouped by states so we would have each point representing a state with a specific kind of disease. A brief show of our data for youth and adults are as shown below:\n\n\nCode\ndf3_youth = read.csv('data/data3_youth.csv')\ndf3_adult = read.csv('data/data3_adult.csv')\ndf3_youth_filter = df3_youth %&gt;% select('Geography_Name','Demographic_Name','Month_Week','n_unweighted','n_weighted','Influenza_Season','Legend_Label') %&gt;% filter(Geography_Name !='National')\ndf3_adult_filter = df3_adult %&gt;% select('Geographic_Name','Demographic_Name','Month_Week','n_unweighted','Influenza_Season','Legend') %&gt;% filter(Geographic_Name !='National') %&gt;% filter(!str_detect(Geographic_Name,'Region'))\ncolnames(df3_youth_filter) &lt;- c('state','age','week','unweighted_death','weighted_death','season','legend')\ncolnames(df3_adult_filter) &lt;- c('state','age','month','unweighted_death','season','legend')\nhead(df3_youth_filter)\n\n\n     state     age            week unweighted_death weighted_death    season\n1 Region 1 Overall November Week 4             3286        2814403 2023-2024\n2 Region 3 Overall November Week 4             6159        6342487 2023-2024\n3 Region 4 Overall November Week 4             4811       14128072 2023-2024\n4 Region 5 Overall November Week 4             4204       11216921 2023-2024\n5 Region 6 Overall November Week 4             4692       10357816 2023-2024\n6 Region 9 Overall November Week 4             3282       10805570 2023-2024\n                                            legend\n1 2023-2024, Region 1. Overall (6 months-17 years)\n2 2023-2024, Region 3. Overall (6 months-17 years)\n3 2023-2024, Region 4. Overall (6 months-17 years)\n4 2023-2024, Region 5. Overall (6 months-17 years)\n5 2023-2024, Region 6. Overall (6 months-17 years)\n6 2023-2024, Region 9. Overall (6 months-17 years)\n\n\nCode\nhead(df3_adult_filter)\n\n\n       state       age           month unweighted_death    season\n1   Virginia 18+ years November Week 3              622 2023-2024\n2   Virginia 18+ years November Week 3              622 2023-2024\n3   Virginia 18+ years November Week 3             4125 2023-2024\n4   Virginia 18+ years November Week 3             4125 2023-2024\n5 Washington 18+ years November Week 3              123 2023-2024\n6 Washington 18+ years November Week 3              123 2023-2024\n                                      legend\n1   2023-2024, Virginia, Overall (18+ years)\n2   2023-2024, Virginia, Overall (18+ years)\n3   2023-2024, Virginia, Overall (18+ years)\n4   2023-2024, Virginia, Overall (18+ years)\n5 2023-2024, Washington, Overall (18+ years)\n6 2023-2024, Washington, Overall (18+ years)"
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.3 Missing value analysis",
    "text": "2.3 Missing value analysis\nAfter brief observation on the data sets, we realized that all the data sets have some kinds of missing values which will affect the our result analysis. They are reflected in the following aspects individually:\nIn dataset 1, we noticed that there are specific weeks of some states that have missing values. For example, in week 46 Alaska, Delaware, District of Columbia, Indiana, Kentucky, Louisiana, Montana, Nevada and North Carolina are all showing “insufficient data”. Meanwhile, Nevada is missing all the data for the year 2023 from week 40 to week 46.\n\n\nCode\ndata1 &lt;- read.csv(\"data/data1.csv\")\n\n# Calculating the number of missing values per column\nmissing_values_counts &lt;- colSums(is.na(data1))\n\n# Create a new dataframe indicating if each value is missing\nmissing_values &lt;- data1 %&gt;% mutate(across(-SUB.AREA, is.na))\n\n# Calculate the proportion of missing values by state for each variable\nmissing_values_proportion &lt;- missing_values %&gt;% \n  group_by(SUB.AREA) %&gt;%\n  summarise(across(everything(), ~ sum(., na.rm = TRUE) / n()))\n\n# Reshape the data for the heatmap\nlong_format &lt;- melt(missing_values_proportion, id.vars = 'SUB.AREA')\n\n# Plot the heatmap\nggplot(long_format, aes(x = variable, y = SUB.AREA, fill = value)) +\n  geom_tile() +\n  scale_fill_gradient(low = \"grey\", high = \"red\") +\n  labs(x = \"Variable\", y = \"Sub-Area\", fill = \"Proportion Missing\") +\n  theme_minimal() +\n  theme(\n    axis.text.x = element_text(angle = 90, hjust = 1, size = 8),\n    axis.text.y = element_text(size = 4))\n\n\n\n\n\nIn dataset 2, a lot of diseases have null values different states such as Alaska, Arkansas, Colorado, Connecticut, Delaware, District of Columbia, Hawaii, Idaho, Indiana, Iowa, Kansas, Louisiana, Maine, Maryland, Minnesota, most of which are missing in influenza and pneumonia, and abnormal clinical findings. Since the column name is relatively long in this file, we use column index while ploting instead.\n\n\nCode\ndata2 &lt;- read.csv(\"data/data2.csv\")\n\n# Define a function to count missing values\ncount_missing &lt;- function(x) {\n  na_count &lt;- sum(is.na(x))             # Count NA values\n  blank_count &lt;- sum(x == \"\", na.rm = TRUE) # Count blank strings, remove NA from count\n  return(na_count + blank_count)\n}\n\n# Apply this function to every column in the dataframe\nmissing_counts &lt;- sapply(data2, count_missing)\n\n# Convert missing_counts to a dataframe\nmissing_data_df &lt;- data.frame(\n  Index = seq_along(missing_counts), # Create an index column\n  Variable = names(missing_counts),\n  Missing = missing_counts,\n  NonMissing = nrow(data2) - missing_counts\n)\n\n# Melt the dataframe for ggplot2\nmissing_data_long &lt;- missing_data_df %&gt;%\n  pivot_longer(cols = c(Missing, NonMissing), names_to = \"Status\", values_to = \"Count\")\n\n# Plot the stacked bar chart using the index for the x-axis\nggplot(missing_data_long, aes(x = Index, y = Count, fill = Status)) +\n  geom_bar(stat = \"identity\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(hjust = 1)) +\n  labs(x = \"Variable Index\", y = \"Count\", fill = \"Data Status\") +\n  ggtitle(\"Missing vs Non-Missing Data Counts per Variable Index\")\n\n\n\n\n\nIn dataset 3, it seems that Guam in “Weekly Cumulative Influenza Vaccination Coverage for Children” tends to have missing values for a few estimation variables such as point estimate, and confidence intervals while the data belongs to “Up-to-date” indicator label in “Weekly Cumulative Influenza Vaccination Coverage for Adults” are highly likely to appear missing.\n\n\nCode\ndata3_adult &lt;- read.csv(\"data/data3_adult.csv\")\ndata3_youth &lt;- read.csv(\"data/data3_youth.csv\")\n\n# Define a function to count missing values\ncount_missing &lt;- function(x) {\n  na_count &lt;- sum(is.na(x))             # Count NA values\n  blank_count &lt;- sum(x == \"\", na.rm = TRUE) # Count blank strings, remove NA from count\n  return(na_count + blank_count)\n}\n\n# Apply this function to every column in the dataframe\nmissing_counts3a &lt;- sapply(data3_adult, count_missing)\nmissing_counts3y &lt;- sapply(data3_youth, count_missing)\n# Creating a data frame for ggplot\nmissing_data_df3a &lt;- data.frame(\n  Variable = names(missing_counts3a),\n  MissingValues = missing_counts3a\n)\n\n# Plotting the bar chart\nggplot(missing_data_df3a, aes(x = Variable, y = MissingValues)) +\n  geom_bar(stat = \"identity\") +\n  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +\n  labs(x = \"Column Names\", y = \"Number of Missing Values\", title = \"Missing Data by Columns for Data3_Adult File\")\n\n\n\n\n\nCode\n# Creating a data frame for ggplot\nmissing_data_df3y &lt;- data.frame(\n  Variable = names(missing_counts3y),\n  MissingValues = missing_counts3y\n)\n\n# Plotting the bar chart\nggplot(missing_data_df3y, aes(x = Variable, y = MissingValues)) +\n  geom_bar(stat = \"identity\") +\n  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +\n  labs(x = \"Column Name\", y = \"Number of Missing Values\", title = \"Missing Data by Columns for Data3_Youth File\")\n\n\n\n\n\nIn dataset 4, which originates from the same data source as dataset 1, there is a distinct difference in scope. While dataset 1 contains data at the state level, dataset 4 expands its coverage to encompass national-level data.\n\n\nCode\n# Read data\ndata4 &lt;- read.csv(\"data/data4.csv\")\n\n# Prepare the data by creating a binary matrix where 1 indicates a missing value and 0 indicates a present value\ndata4_missing &lt;- data4 %&gt;%\n  mutate(across(everything(), ~ ifelse(is.na(.), 1, 0)))  # Convert NAs to 1\n\n# Add a row number column to represent each row in the original dataset\ndata4_missing$row_id &lt;- seq_len(nrow(data4_missing))\n\n# Convert this dataframe to a long format for plotting\ndata4_long &lt;- data4_missing %&gt;%\n  pivot_longer(cols = -row_id, names_to = \"variable\", values_to = \"is_missing\") %&gt;%\n  mutate(is_missing = factor(is_missing, labels = c(\"Present\", \"Missing\")))  # Convert to factor for coloring\n\n# Create the heatmap\nggplot(data4_long, aes(x = variable, y = row_id, fill = is_missing)) +\n  geom_tile() +\n  scale_fill_manual(values = c(\"Present\" = \"grey\", \"Missing\" = \"black\")) +\n  theme_minimal() +\n  theme(\n    axis.text.x = element_text(angle = 90, vjust = 1, hjust=1),\n    axis.text.y = element_blank(),  \n    axis.ticks.y = element_blank(), \n    legend.position = \"none\"\n  ) +\n  labs(x = \"Variable\", y = \"Row\") +\n  ggtitle(\"Heatmap of Missing Values in Data4\")\n\n\n\n\n\nIdeally, we would want to fill in the missing data by choosing the mean or median of the columns to replace the potential risk of removing all the N/A from the dataframe. However, in practice it is very risky to just directly to replace the emptiness with the mean or the median as we cannont conclude that mean or median would serve as good estimators for those missing values. Hence it would be more practical to go with a more conservative method rather than blindly use unverified estimators."
  },
  {
    "objectID": "results.html#section",
    "href": "results.html#section",
    "title": "3  Results",
    "section": "3.1 ",
    "text": "3.1 \nWhether influenza and pneumonia have same patterns as Covid trend.\n\n\nCode\n# Data4 is national wise data\n# Read data\ndata4 &lt;- read.csv(\"data/data4.csv\")\n\n# Change column names and remove unnecessary columns\ndata4 &lt;- data4 %&gt;%\n  rename(\n    year = SEASON,\n    week = WEEK,\n    num_influenza_death = NUM.INFLUENZA.DEATHS,\n    num_pneumonia_death = NUM.PNEUMONIA.DEATHS,\n    num_covid_death = NUM.COVID.19.DEATHS,\n    total_pic = TOTAL.PIC,\n    total_deaths = TOTAL.DEATHS\n  ) %&gt;%\n  select(-AREA, -SUB.AREA, -AGE.GROUP, -THRESHOLD, -BASELINE, -PERCENT.I, -PERCENT.P.I, \n         -PERCENT.PIC, -PERCENT.COMPLETE)\n\ndata4 &lt;- data4 %&gt;%\n  mutate(\n    num_influenza_death = as.numeric(gsub(\",\", \"\", num_influenza_death)),\n    num_pneumonia_death = as.numeric(gsub(\",\", \"\", num_pneumonia_death)),\n    num_covid_death = as.numeric(gsub(\",\", \"\", num_covid_death))\n  )\n\n# Aggregate the data by year to get the total deaths for each cause\ntotal_deaths &lt;- data4 %&gt;%\n  group_by(year) %&gt;%\n  summarise(\n    total_influenza_death = sum(num_influenza_death, na.rm = TRUE),\n    total_pneumonia_death = sum(num_pneumonia_death, na.rm = TRUE),\n    total_covid_death = sum(num_covid_death, na.rm = TRUE)\n  )\n\n# Transform data to long format for plotting\nlong_data_line &lt;- total_deaths %&gt;%\n  select(year, total_influenza_death, total_pneumonia_death, total_covid_death) %&gt;%\n  pivot_longer(\n    cols = starts_with(\"total\"),\n    names_to = \"cause\",\n    values_to = \"deaths\"\n  ) %&gt;%\n  mutate(cause = factor(cause, levels = c(\"total_influenza_death\",\n                                          \"total_pneumonia_death\",\n                                          \"total_covid_death\")))\n\n# Plot the data\nggplot(long_data_line, aes(x = year, y = deaths, color = cause, group = cause)) +\n  geom_line(size = 1) +\n  scale_color_manual(values = c(\"total_influenza_death\" = \"blue\", \n                                \"total_pneumonia_death\" = \"red\", \n                                \"total_covid_death\" = \"green\")) +\n  labs(title = \"Number of Deaths by Year\",\n       x = \"Year\",\n       y = \"Number of Deaths\",\n       color = \"Cause of Death\") +\n  theme_minimal()"
  },
  {
    "objectID": "results.html#facet-graphs",
    "href": "results.html#facet-graphs",
    "title": "3  Results",
    "section": "3.2 Facet graphs",
    "text": "3.2 Facet graphs\nIdea: 8 subplots-seasons(years); x axis: week; y axis: # of deaths; 2 lines in each graph(one is # of influenza deaths; the other one is # of pneumonia deaths)\n\n\nCode\n# Data4 is national wise data; Data 1 is state data\n# Read data\ndata4 &lt;- read.csv(\"data/data4.csv\")\n\n# Change column names and remove unnecessary columns\ndata4 &lt;- data4 %&gt;%\n  rename(\n    year = SEASON,\n    week = WEEK,\n    num_influenza_death = NUM.INFLUENZA.DEATHS,\n    num_pneumonia_death = NUM.PNEUMONIA.DEATHS,\n    num_covid_death = NUM.COVID.19.DEATHS,\n    total_pic = TOTAL.PIC,\n    total_deaths = TOTAL.DEATHS\n  ) %&gt;%\n  select(-AREA, -SUB.AREA, -AGE.GROUP, -THRESHOLD, -BASELINE, -PERCENT.I, -PERCENT.P.I, \n         -PERCENT.PIC, -PERCENT.COMPLETE)\n\n# Convert death count variables to numeric\ndata4$num_influenza_death &lt;- as.numeric(as.character(data4$num_influenza_death))\ndata4$num_pneumonia_death &lt;- as.numeric(gsub(\",\", \"\", data4$num_pneumonia_death))\n\n# Reshape the data to long format\nlong_data &lt;- data4 %&gt;% \n  select(week, year, num_influenza_death, num_pneumonia_death) %&gt;%\n  pivot_longer(\n    cols = starts_with(\"num\"),\n    names_to = \"death_type\",\n    values_to = \"num_deaths\"\n  )\n\nlong_data &lt;- long_data %&gt;%\n  mutate(week_order = factor(week, levels = c(40:52, 1:39)))\n\n# Create the plot with facets for each season and lines for each death type\nggplot(long_data, aes(x = week_order, y = num_deaths, color = death_type, group = death_type)) +\n  geom_line() +\n  facet_wrap(~ year, scales = \"free_y\") + \n  theme_minimal() +\n  labs(title = \"Weekly Death Counts by Type Across Years\",\n       x = \"Week of the Year\",\n       y = \"Number of Deaths\") +\n  scale_color_brewer(palette = \"Set1\") +\n  theme(legend.position = \"bottom\") +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5)) +\n  scale_x_discrete(breaks = function(x) seq(1, length(x), by = 4))\n\n\n\n\n\n\nWhat can we conclude from the plot: Covid 19 affect the number of pneumonia deaths a lot. From 2019 to 2022, we can look the scale of y axis, it dramatically increase from 4000 (first three graphs) to around 15000. However, the number of influenza death is still flat across all different year and week. ALSO, there is an interesting trend for pneumonia, winter season or the week with low temperatures might increase the deaths of pneumonia, except for 2019 to 2020."
  },
  {
    "objectID": "results.html#stacked-bar-chart",
    "href": "results.html#stacked-bar-chart",
    "title": "3  Results",
    "section": "3.3 stacked bar chart",
    "text": "3.3 stacked bar chart\nIdea: 8 bars; x axis is year, y axis is number of deaths, stacked from three colors(one is # of influenza deaths; two is # of pneumonia deaths, three is # of covid deaths)\n\n\nCode\n# Convert character columns to numeric\ndata4 &lt;- data4 %&gt;%\n  mutate(\n    num_covid_death = as.numeric(gsub(\",\", \"\", num_covid_death))\n  )\n\n# Aggregate the data by year to get the total deaths for each cause\nannual_deaths &lt;- data4 %&gt;%\n  group_by(year) %&gt;%\n  summarise(\n    influenza_death = sum(num_influenza_death, na.rm = TRUE),\n    pneumonia_death = sum(num_pneumonia_death, na.rm = TRUE),\n    covid_death = sum(num_covid_death, na.rm = TRUE)\n  )\n\n# Reshape the data to a long format for plotting\nlong_data2 &lt;- annual_deaths %&gt;%\n  select(year, influenza_death, pneumonia_death, covid_death) %&gt;%\n  pivot_longer(\n    cols = c(influenza_death, pneumonia_death, covid_death),\n    names_to = \"death_type\",\n    values_to = \"deaths\"\n  )\n\n# Plot the stacked bar chart\nggplot(long_data2, aes(x = year, y = deaths, fill = death_type)) +\n  geom_bar(stat = \"identity\", position = \"stack\") +\n  labs(title = \"Total Annual Deaths by Cause\",\n       x = \"Year\",\n       y = \"Number of Deaths\",\n       fill = \"Cause of Death\") +\n  theme_minimal()\n\n\n\n\n\n\nWhat can we conclude from the plot: the number of deaths due to these three causes in year 2020-2021 is highest."
  },
  {
    "objectID": "results.html#using-data1-focus-on-state-scatter-plot",
    "href": "results.html#using-data1-focus-on-state-scatter-plot",
    "title": "3  Results",
    "section": "3.4 using data1, focus on state— scatter plot",
    "text": "3.4 using data1, focus on state— scatter plot\nexplore relationships between the different types of death counts or between death counts and weeks. Idea: x-axis is num_influenza_death, y-axis is num_pneumonia_death (It could show if there’s any correlation between the two types of deaths on a state-by-state basis over a given year).\n\n\nCode\n# Data1 is state wise data\n# Read data\ndata1 &lt;- read.csv(\"data/data1.csv\")\n\n# Change column names and remove unnecessary columns\ndata1 &lt;- data1 %&gt;%\n  rename(\n    state = SUB.AREA,\n    year = SEASON,\n    week = WEEK,\n    num_influenza_death = NUM.INFLUENZA.DEATHS,\n    num_pneumonia_death = NUM.PNEUMONIA.DEATHS,\n    num_covid_death = NUM.COVID.19.DEATHS,\n    total_pic = TOTAL.PIC,\n    total_deaths = TOTAL.DEATHS\n  ) %&gt;%\n  select(-AREA, -AGE.GROUP, -PERCENT.I, -PERCENT.P.I, -PERCENT.PIC, -PERCENT.COMPLETE)\n\n# Aggregate the data to get total yearly deaths by state\nyearly_deaths_by_state &lt;- data1 %&gt;%\n  group_by(state, year) %&gt;%\n  summarise(\n    total_influenza_death = sum(as.numeric(gsub(\",\", \"\", num_influenza_death)), na.rm = TRUE),\n    total_pneumonia_death = sum(as.numeric(gsub(\",\", \"\", num_pneumonia_death)), na.rm = TRUE)\n  ) %&gt;%\n  ungroup()\n\nyearly_deaths_by_state$state &lt;- as.factor(yearly_deaths_by_state$state)\n\n# Create an interactive scatter plot\nplot_ly(data = yearly_deaths_by_state, x = ~total_influenza_death, y = ~total_pneumonia_death, \n        type = 'scatter', mode = 'markers',\n        color = ~state, \n        text = ~paste('State:', state, '&lt;br&gt;Year:', year),  # Text to display on hover\n        hoverinfo = 'text',  # Show text on hover\n        marker = list(size = 10, opacity = 0.6)) %&gt;%\n  layout(title = 'Total Deaths from Influenza vs. Pneumonia by State and Year',\n         xaxis = list(title = 'Total Influenza Deaths'),\n         yaxis = list(title = 'Total Pneumonia Deaths'))\n\n\n\n\n\n\n\nIt is overall plot to look at the relationship between two causes of deaths"
  },
  {
    "objectID": "results.html#d3-proposal",
    "href": "results.html#d3-proposal",
    "title": "3  Results",
    "section": "3.5 D3 proposal",
    "text": "3.5 D3 proposal\nInput: State and year Output: interactively scattetplot to look at the relationship\n\n\nCode\n# Define a function to create the plot for a specific year\ncreate_scatter_plot &lt;- function(data, input_year) {\n  # Filter the data for the specified state and year\n  filtered_data &lt;- data %&gt;%\n    filter(year == input_year) %&gt;%\n    group_by(state) %&gt;%\n    summarise(\n    influenza_death = sum(as.numeric(gsub(\",\", \"\", num_influenza_death)), na.rm = TRUE),\n    pneumonia_death = sum(as.numeric(gsub(\",\", \"\", num_pneumonia_death)), na.rm = TRUE),\n      .groups = 'drop'\n    )\n  \n  filtered_data$state &lt;- as.factor(filtered_data$state)\n  \n  # Create the scatter plot\n  plot &lt;- plot_ly(\n    data = filtered_data,\n    x = ~influenza_death,\n    y = ~pneumonia_death,\n    type = 'scatter',\n    mode = 'markers',\n    text = ~state,  # Use week numbers as text labels\n    hoverinfo = 'text',\n    marker = list(size = 10)\n  ) %&gt;%\n    layout(\n      title = paste('Influenza vs. Pneumonia Deaths -', input_year),\n      xaxis = list(title = 'Number of Influenza Deaths'),\n      yaxis = list(title = 'Number of Pneumonia Deaths')\n    )\n  \n  return(plot)\n}\n\n# Example usage:\n# Assuming 'data1' is your dataset\ninteractive_plot &lt;- create_scatter_plot(data1, '2021-22')\ninteractive_plot\n\n\n\n\n\n\n\nBy changing year, we could look at the relationship specifically."
  },
  {
    "objectID": "results.html#heatmap",
    "href": "results.html#heatmap",
    "title": "3  Results",
    "section": "3.6 Heatmap",
    "text": "3.6 Heatmap\nIdea: We can know which state has the highest number of deaths because of these three death causes across the year\n\n\nCode\n# Convert the death count columns from character to numeric\ndata1 &lt;- data1 %&gt;%\n  mutate(\n    total_pic = as.numeric(gsub(\",\", \"\", total_pic))\n  )\n\n# Aggregate the data by state and year\nstate_yearly_deaths &lt;- data1 %&gt;%\n  group_by(state, year) %&gt;%\n  summarise(total_pic = sum(total_pic, na.rm = TRUE)) %&gt;%\n  ungroup()\n\n# Reshape the data for the heatmap\nheatmap_data &lt;- reshape2::melt(state_yearly_deaths, id.vars = c(\"state\", \"year\"))\n\n# Create the heatmap\nggplot(heatmap_data, aes(x = year, y = state, fill = value)) +\n  geom_tile() +  # Use geom_tile for heatmap squares\n  scale_fill_gradient(low = \"white\", high = \"red\") +  # Use a gradient from white to red for the fill\n  labs(title = \"Heatmap of Total Deaths by State and Year\",\n       x = \"Year\",\n       y = \"State\",\n       fill = \"Total Deaths\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1),  # Angle the x-axis text for better readability\n        axis.text.y = element_text(size = 7))  # Adjust the size of the y-axis text if needed\n\n\n\n\n\n\nOverall: Texas, California, Florida are three states with highest number of deaths across years, especially in 2020-2021 Texas and California have the brighter red.\nwhether we can use Texas and California to do the mosaic plot"
  },
  {
    "objectID": "results.html#parallel-coordinate-plot",
    "href": "results.html#parallel-coordinate-plot",
    "title": "3  Results",
    "section": "3.7 Parallel coordinate plot",
    "text": "3.7 Parallel coordinate plot\nIdea: each line is a date; 10 diseases causes. (National level)\n\n\nCode\ndata2 &lt;- read.csv(\"data/data2.csv\")\n\ndata2 &lt;- data2 %&gt;%\n  select(occurrence = Jurisdiction.of.Occurrence,\n         year = MMWR.Year,\n         week = MMWR.Week,\n         date = Week.Ending.Date,\n         all_cause = All.Cause,\n         natural_cause = Natural.Cause,\n         septicemia = Septicemia..A40.A41.,\n         malignant_neoplasms = Malignant.neoplasms..C00.C97.,\n         diabetes_mellitus = Diabetes.mellitus..E10.E14.,\n         alzheimer = Alzheimer.disease..G30.,\n         influenza_pneumonia = Influenza.and.pneumonia..J09.J18.,\n         chronic_respiratory = Chronic.lower.respiratory.diseases..J40.J47.,\n         other_respiratory = Other.diseases.of.respiratory.system..J00.J06.J30.J39.J67.J70.J98.,\n         nephritis = Nephritis..nephrotic.syndrome.and.nephrosis..N00.N07.N17.N19.N25.N27.,\n         non_classified = Symptoms..signs.and.abnormal.clinical.and.laboratory.findings..not.elsewhere.classified..R00.R99.,\n         heart_diseases = Diseases.of.heart..I00.I09.I11.I13.I20.I51.,\n         cerebrovascular = Cerebrovascular.diseases..I60.I69.,\n         covid19_multiple = COVID.19..U071..Multiple.Cause.of.Death.,\n         covid19_underlying = COVID.19..U071..Underlying.Cause.of.Death.)\n\n# Choose ten specific diseases, including septicemia, malignant_neoplasms, diabetes_mellitus, alzheimer, influenza_pneumonia, combined respiratory, nephritis, heart_diseases, cerebrovascular, covid19)\n\n# Combine column1 and column2 into a new column called combined\ndata2 &lt;- data2 %&gt;%\n  mutate(combined_respiratory = chronic_respiratory + other_respiratory,\n         combined_covid19 = covid19_multiple + covid19_underlying)\n\n\n\n\nCode\nnew_data2 &lt;- data2 %&gt;%\n  filter(occurrence == 'United States')\n\n\n\n\nCode\nfig &lt;- plot_ly(type = 'parcoords',\n               line = list(color = as.integer(as.factor(new_data2$date))),\n               dimensions = list(\n                 list(label = 'Septicemia', values = new_data2$septicemia),\n                 list(label = 'Malignant Neoplasms', values = new_data2$malignant_neoplasms),\n                 list(label = 'Diabetes Mellitus', values = new_data2$diabetes_mellitus),\n                 list(label = 'Alzheimer', values = new_data2$alzheimer),\n                 list(label = 'Influenza Pneumonia', values = new_data2$influenza_pneumonia),\n                 list(label = 'Chronic Respiratory', values = new_data2$combined_respiratory),\n                 list(label = 'Nephritis', values = new_data2$nephritis),\n                 list(label = 'Heart Diseases', values = new_data2$heart_diseases),\n                 list(label = 'Cerebrovascular', values = new_data2$cerebrovascular),\n                 list(label = 'COVID-19', values = new_data2$combined_covid19)\n               )) %&gt;% layout(\n  title = \"Parallel Coordinates Plot for Causes of Death\",\n  font = list(size = 9)  # Adjust font size\n               )\n\n# Show the plot\nfig"
  },
  {
    "objectID": "results.html#facet-scatterplot-look-at-the-relationships-between-any-2-diseases.-1010",
    "href": "results.html#facet-scatterplot-look-at-the-relationships-between-any-2-diseases.-1010",
    "title": "3  Results",
    "section": "3.7 Facet scatterplot: look at the relationships between any 2 diseases. 10*10",
    "text": "3.7 Facet scatterplot: look at the relationships between any 2 diseases. 10*10\nIdea: Scatterplot matrix\n\n\nCode\nfiltered_data2 &lt;- data2 %&gt;%\n  filter(year == '2020', occurrence == 'United States')\nselected_data &lt;- filtered_data2 %&gt;%\n  select(septicemia, malignant_neoplasms, diabetes_mellitus, alzheimer, \n         influenza_pneumonia, combined_respiratory, nephritis, heart_diseases, \n         cerebrovascular, combined_covid19)\n\n# Create the scatter plot matrix\nplot &lt;- ggpairs(selected_data,\n        title = \"Scatter Plot Matrix for Disease Relationships\",\n        upper = list(continuous = wrap(\"cor\", size = 3)), \n        lower = list(continuous = wrap(\"points\", size = 0.3, alpha = 0.5)), \n        diag = list(continuous = wrap(\"densityDiag\", size = 0.5)))\n\n# Customize the plot to improve readability of labels\nplot &lt;- plot +\n  theme(\n    # Rotate the text for x and y axis labels to avoid overlap\n    axis.text.x = element_text(vjust = 1, hjust = 1, size = 3.5),\n    axis.text.y = element_text(vjust = 1, hjust = 1, size = 5),\n    axis.title.x = element_text(size = 5),\n    axis.title.y = element_text(size = 7),\n    strip.text = element_text(size = 5)\n  )\n\n# Render the plot\nplot"
  },
  {
    "objectID": "d3graph.html#div-plot",
    "href": "d3graph.html#div-plot",
    "title": "4  Interactive graph",
    "section": "4.1 Div plot",
    "text": "4.1 Div plot\n\nDataset 1\n\n\nDataset 2\n\n\n\n\n\n\n\n\nThe idea and mechanism of the interactivity plot comes from d3 Graph Gallery with combination of  course d3 website."
  },
  {
    "objectID": "results.html#how-do-diseases-with-similar-transmission-methods-compare-to-covid-19",
    "href": "results.html#how-do-diseases-with-similar-transmission-methods-compare-to-covid-19",
    "title": "3  Results",
    "section": "3.1 How Do Diseases with Similar Transmission Methods Compare to COVID-19?",
    "text": "3.1 How Do Diseases with Similar Transmission Methods Compare to COVID-19?\nDuring the outbreak, populace were educated and informed that COVID-19 is transmitted through our respiratory systems. We would like to start observing diseases that are also transmitted through our respiratory system, i.e. influenza and pneumonia, have similar or basically the same patterns as that of COVID-19.\n\n\nCode\n# Data4 is national wise data\n# Read data\ndata4 &lt;- read.csv(\"data/data4.csv\")\n\n# Change column names and remove unnecessary columns\ndata4 &lt;- data4 %&gt;%\n  rename(\n    year = SEASON,\n    week = WEEK,\n    num_influenza_death = NUM.INFLUENZA.DEATHS,\n    num_pneumonia_death = NUM.PNEUMONIA.DEATHS,\n    num_covid_death = NUM.COVID.19.DEATHS,\n    total_pic = TOTAL.PIC,\n    total_deaths = TOTAL.DEATHS\n  ) %&gt;%\n  select(-AREA, -SUB.AREA, -AGE.GROUP, -THRESHOLD, -BASELINE, -PERCENT.I, -PERCENT.P.I, \n         -PERCENT.PIC, -PERCENT.COMPLETE)\n\ndata4 &lt;- data4 %&gt;%\n  mutate(\n    num_influenza_death = as.numeric(gsub(\",\", \"\", num_influenza_death)),\n    num_pneumonia_death = as.numeric(gsub(\",\", \"\", num_pneumonia_death)),\n    num_covid_death = as.numeric(gsub(\",\", \"\", num_covid_death))\n  )\n\n# Aggregate the data by year to get the total deaths for each cause\ntotal_deaths &lt;- data4 %&gt;%\n  group_by(year) %&gt;%\n  summarise(\n    total_influenza_death = sum(num_influenza_death, na.rm = TRUE),\n    total_pneumonia_death = sum(num_pneumonia_death, na.rm = TRUE),\n    total_covid_death = sum(num_covid_death, na.rm = TRUE)\n  )\n\n# Transform data to long format for plotting\nlong_data_line &lt;- total_deaths %&gt;%\n  select(year, total_influenza_death, total_pneumonia_death, total_covid_death) %&gt;%\n  pivot_longer(\n    cols = starts_with(\"total\"),\n    names_to = \"cause\",\n    values_to = \"deaths\"\n  ) %&gt;%\n  mutate(cause = factor(cause, levels = c(\"total_influenza_death\",\n                                          \"total_pneumonia_death\",\n                                          \"total_covid_death\")))\n\n# Plot the data\nggplot(long_data_line, aes(x = year, y = deaths, color = cause, group = cause)) +\n  geom_line(size = 1) +\n  scale_color_manual(values = c(\"total_influenza_death\" = \"blue\", \n                                \"total_pneumonia_death\" = \"red\", \n                                \"total_covid_death\" = \"green\")) +\n  labs(title = \"Number of Deaths by Year\",\n       x = \"Year\",\n       y = \"Number of Deaths\",\n       color = \"Cause of Death\") +\n  theme_minimal()\n\n\n\n\n\n\nFrom the line chart above, we can see that pneumonia seems to follow the trends of COVID-19 but influenza doesn’t throughout the time span from before to after the outbreak. Hence, it would be impetuous to conclude that diseases with similar transmission methods follow the same trends in casualties at the moment."
  },
  {
    "objectID": "results.html#is-the-trend-we-observed-above-an-coincidence",
    "href": "results.html#is-the-trend-we-observed-above-an-coincidence",
    "title": "3  Results",
    "section": "3.2 Is The Trend We Observed Above An Coincidence?",
    "text": "3.2 Is The Trend We Observed Above An Coincidence?\nTo confirm our observation above, we need to dive further into the dataset individually for influenza and pneumonia year by year starting from 2016 till this year. We do so by generating a faceted plot on years, where x axis denotes week within the year; y axis denotes the number of deaths; the two lines representing the number of influenza deaths and pneumonia deaths\n\n\nCode\n# Reshape the data to long format\nlong_data_line2 &lt;- data4 %&gt;% \n  select(week, year, num_influenza_death, num_pneumonia_death) %&gt;%\n  pivot_longer(\n    cols = starts_with(\"num\"),\n    names_to = \"death_type\",\n    values_to = \"num_deaths\"\n  )\n\nlong_data_line2 &lt;- long_data_line2 %&gt;%\n  mutate(week_order = factor(week, levels = c(40:52, 1:39)))\n\n# Create the plot with facets for each season and lines for two death types\nggplot(long_data_line2, aes(x = week_order, y = num_deaths, color = death_type, group = death_type)) +\n  geom_line() +\n  facet_wrap(~ year, scales = \"free_y\") + \n  theme_minimal() +\n  labs(title = \"Weekly Death Counts by Type Across Years\",\n       x = \"Week of the Year\",\n       y = \"Number of Deaths\") +\n  scale_color_brewer(palette = \"Set1\") +\n  theme(legend.position = \"bottom\") +\n  theme(axis.text.x = element_text(vjust = 0.5)) +\n  scale_x_discrete(breaks = function(x) seq(1, length(x), by = 4))\n\n\n\n\n\n\nFrom the faceted plots above, we can see that COVID-19 affects the number of pneumonia deaths a great deal. Looking at the scale of y axis from 2019 to 2022, we observed that it dramatically increase from 4000 (first three graphs) to around 15000. However, the number of influenza death is still consistently flat across all different year and week. Meanwhile, there is an interesting trend for pneumonia where winter season or the week with low temperatures might increase the deaths of pneumonia, except for 2019 to 2020. Note that the last graph only shows a portion because we count year starting from end of a year till the end of the following year so it makes sense that it only shows a little since we are currently at the end of 2023 it just started recording the data for a whole new year."
  },
  {
    "objectID": "results.html#how-are-casualties-distributed-across-these-three-diseases",
    "href": "results.html#how-are-casualties-distributed-across-these-three-diseases",
    "title": "3  Results",
    "section": "3.3 How Are Casualties Distributed Across These Three Diseases?",
    "text": "3.3 How Are Casualties Distributed Across These Three Diseases?\nKnowing the trends individually gives us partial idea on the deaths of each disease. We cannot tell whether casualties of certain number is considered fortune or critical given the surroundings at the moment. Hence, it is more worthwhile to put them together and compare their relative proportion over the timeline. We achieve this objective through stacked bar charts where x axis is year; y axis is number of deaths and bar charts are stacked from three colors with each representing the death of COVID, influenza and pneumonia.\n\n\nCode\n# Reshape the data to a long format for plotting\nlong_data_stacked &lt;- total_deaths %&gt;%\n  select(year, total_influenza_death, total_pneumonia_death, total_covid_death) %&gt;%\n  pivot_longer(\n    cols = c(total_influenza_death, total_pneumonia_death, total_covid_death),\n    names_to = \"death_type\",\n    values_to = \"deaths\"\n  )\n\n# Plot the stacked bar chart\nggplot(long_data_stacked, aes(x = year, y = deaths, fill = death_type)) +\n  geom_bar(stat = \"identity\", position = \"stack\") +\n  labs(title = \"Total Annual Deaths by Cause\",\n       x = \"Year\",\n       y = \"Number of Deaths\",\n       fill = \"Cause of Death\") +\n  theme_minimal()\n\n\n\n\n\n\nBased on the result above, it quite obvious that the number of deaths due to these three causes in year 2020-2021 is the highest, which is consistent with our previous conclusion on the general trends of the three disease since pneuomonia follows the same trends as COVID-19 while influenza stays relatively low the cumulative result of the three will end up with a huge peak at the year 2020 to 2021. On the other hand, if we take a look at the proportion of the deaths we can see that there’s actually a drastic increase in proportion of deaths in COVID and decrease for pneumonia even though the total number of deaths in pneumonia still decreased. Specifically, the deaths of COVID even reached more than 50% of deaths among the three and then decreased after the outbreak. Interestingly, we notice that there seems to be some slight increase in the number of deaths in pneumonia last year from 2022 to 2023 as compared to pre-COVID period before 2020. However, it is still ambiguous at the moment to say if there are certain changes in deaths due to the outbreak of COVID since the pattern observed last year might still be the remain consequenes of COVID. It would be more accurate to make further inference if we have the data for 2023 to 2024 by hand and compare it to last year and the year before the outbreak."
  },
  {
    "objectID": "results.html#how-are-casualties-reflected-in-each-state",
    "href": "results.html#how-are-casualties-reflected-in-each-state",
    "title": "3  Results",
    "section": "3.4 How Are Casualties Reflected in Each State?",
    "text": "3.4 How Are Casualties Reflected in Each State?\nAfter exploring national trends for these three diseases, we would like to know more about the relationships between the different types of death counts and also the relationnship between death counts and year over state level. We created a ggplotly interactive plot where x-axis is num_influenza_death, y-axis is num_pneumonia_death and the time information when hovered. It could show if there’s any correlation between the two types of deaths on a state-by-state basis over a given year.\n\n\nCode\n# Data1 is state wise data\n# Read data\ndata1 &lt;- read.csv(\"data/data1.csv\")\n\n# Change column names and remove unnecessary columns\ndata1 &lt;- data1 %&gt;%\n  rename(\n    state = SUB.AREA,\n    year = SEASON,\n    week = WEEK,\n    num_influenza_death = NUM.INFLUENZA.DEATHS,\n    num_pneumonia_death = NUM.PNEUMONIA.DEATHS,\n    num_covid_death = NUM.COVID.19.DEATHS,\n    total_pic = TOTAL.PIC,\n    total_deaths = TOTAL.DEATHS\n  ) %&gt;%\n  select(-AREA, -AGE.GROUP, -PERCENT.I, -PERCENT.P.I, -PERCENT.PIC, -PERCENT.COMPLETE)\n\n# Aggregate the data to get total yearly deaths by state\nyearly_deaths_by_state &lt;- data1 %&gt;%\n  group_by(state, year) %&gt;%\n  summarise(\n    total_influenza_death = sum(as.numeric(gsub(\",\", \"\", num_influenza_death)), na.rm = TRUE),\n    total_pneumonia_death = sum(as.numeric(gsub(\",\", \"\", num_pneumonia_death)), na.rm = TRUE)\n  ) %&gt;%\n  ungroup()\n\nyearly_deaths_by_state$state &lt;- as.factor(yearly_deaths_by_state$state)\n\n# Create an interactive scatter plot\nplot_ly(data = yearly_deaths_by_state, x = ~total_influenza_death, y = ~total_pneumonia_death, \n        type = 'scatter', mode = 'markers',\n        #color = ~state, \n        text = ~paste('State:', state, '&lt;br&gt;Year:', year),  # Text to display on hover\n        hoverinfo = 'text',  # Show text on hover\n        marker = list(size = 10, opacity = 0.6)) %&gt;%\n  layout(title = 'Total Deaths from Influenza vs. Pneumonia by State and Year',\n         xaxis = list(title = 'Total Influenza Deaths'),\n         yaxis = list(title = 'Total Pneumonia Deaths'))\n\n\n\n\n\n\n\nIn general, it seems that there’s no relatinoship between the two causes of deaths. Even though there’s a slight upward trends in the scatterplot, it is actually misleading in a sense that the scale of the deaths for the two disease are different. In other words, if we scale them to the same the scatterplot is highly likely to be spreadout. On the other hand, there are a lot of outliers that are leading out our misinterpretation of the graph. When hovering over the points further away from either axes, we will notice that these points are mainly California, Texas and Florida in different years. That being said, it is critical and worthwhile to take a closer look at these two states and infer what might be the potential causes of these. It could be the size of the state population, the location within the state or even the history of the states which forms residents’ habits."
  },
  {
    "objectID": "results.html#do-california-texas-and-florida-tend-to-have-high-casualties-in-diseases",
    "href": "results.html#do-california-texas-and-florida-tend-to-have-high-casualties-in-diseases",
    "title": "3  Results",
    "section": "3.5 Do California, Texas and Florida Tend to Have High Casualties In Diseases?",
    "text": "3.5 Do California, Texas and Florida Tend to Have High Casualties In Diseases?\nTo verify our previous concerns on outliers which state has the highest number of deaths because of these three death causes across the year, we would like to use a heatmap to have a more straightforward idea on the frequency of death for across the years.\n\n\nCode\n# Convert the death count columns from character to numeric\ndata1 &lt;- data1 %&gt;%\n  mutate(\n    total_pic = as.numeric(gsub(\",\", \"\", total_pic))\n  )\n\n# Calculate total deaths for each state across all years\nstate_total_deaths &lt;- data1 %&gt;%\n  group_by(state) %&gt;%\n  summarise(total_pic_deaths = sum(total_pic, na.rm = TRUE)) %&gt;%\n  ungroup()\n\n# Aggregate the data by state and year\nstate_yearly_deaths &lt;- data1 %&gt;%\n  group_by(state, year) %&gt;%\n  summarise(total_pic = sum(total_pic, na.rm = TRUE)) %&gt;%\n  ungroup()\n\n# Join this information with the state_yearly_deaths and reorder the state factor\nstate_yearly_deaths &lt;- state_yearly_deaths %&gt;%\n  left_join(state_total_deaths, by = \"state\") %&gt;%\n  mutate(state = reorder(state, total_pic_deaths)) %&gt;%\n  select(-total_pic_deaths)\n\n# Reshape the data for the heatmap\nheatmap_data &lt;- reshape2::melt(state_yearly_deaths, id.vars = c(\"state\", \"year\"))\n\n# Create the heatmap\nggplot(heatmap_data, aes(x = year, y = state, fill = value)) +\n  geom_tile() +  # Use geom_tile for heatmap squares\n  scale_fill_gradient(low = \"white\", high = \"red\") +\n  labs(title = \"Heatmap of Total Deaths by State and Year\",\n       x = \"Year\",\n       y = \"State\",\n       fill = \"Total Deaths\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(hjust = 1),  # Angle the x-axis text for better readability\n        axis.text.y = element_text(size = 7))  # Adjust the size of the y-axis text if needed\n\n\n\n\n\n\nOverall Texas, California, Florida are three states with highest number of deaths across years, especially in 2020-2021 Texas and California have the brighter red which implies more total deaths. This result and conclusion confirm our suspect that these three states are outliers in some sense and meanwhile explain why they are further away from the axes in the previous graph."
  },
  {
    "objectID": "results.html#how-about-other-diseases-transmitted-through-other-methods-than-respiratory-systems",
    "href": "results.html#how-about-other-diseases-transmitted-through-other-methods-than-respiratory-systems",
    "title": "3  Results",
    "section": "3.6 How About Other Diseases Transmitted Through Other Methods Than Respiratory Systems?",
    "text": "3.6 How About Other Diseases Transmitted Through Other Methods Than Respiratory Systems?\nTo check that if disease transmission methods would be a factor influencing the their total deaths, we used a parellel coordinate plot, where each line is a date; each axis is one of the 10 diseases causes, to see what are the top several ones.\n\n\nCode\n# Read data\ndata2 &lt;- read.csv(\"data/data2.csv\")\n\n# Select necessary columns and rename them\ndata2 &lt;- data2 %&gt;%\n  select(occurrence = Jurisdiction.of.Occurrence,\n         year = MMWR.Year,\n         week = MMWR.Week,\n         date = Week.Ending.Date,\n         all_cause = All.Cause,\n         natural_cause = Natural.Cause,\n         septicemia = Septicemia..A40.A41.,\n         malignant_neoplasms = Malignant.neoplasms..C00.C97.,\n         diabetes_mellitus = Diabetes.mellitus..E10.E14.,\n         alzheimer = Alzheimer.disease..G30.,\n         influenza_pneumonia = Influenza.and.pneumonia..J09.J18.,\n         chronic_respiratory = Chronic.lower.respiratory.diseases..J40.J47.,\n         other_respiratory = Other.diseases.of.respiratory.system..J00.J06.J30.J39.J67.J70.J98.,\n         nephritis = Nephritis..nephrotic.syndrome.and.nephrosis..N00.N07.N17.N19.N25.N27.,\n         non_classified = Symptoms..signs.and.abnormal.clinical.and.laboratory.findings..not.elsewhere.classified..R00.R99.,\n         heart_diseases = Diseases.of.heart..I00.I09.I11.I13.I20.I51.,\n         cerebrovascular = Cerebrovascular.diseases..I60.I69.,\n         covid19_multiple = COVID.19..U071..Multiple.Cause.of.Death.,\n         covid19_underlying = COVID.19..U071..Underlying.Cause.of.Death.)\n\n# Choose ten specific diseases, including septicemia, malignant_neoplasms, diabetes_mellitus, alzheimer, influenza_pneumonia, combined respiratory, nephritis, heart_diseases, cerebrovascular, covid19)\n\n# Combine column1 and column2 into a new column called combined\ndata2 &lt;- data2 %&gt;%\n  mutate(combined_respiratory = chronic_respiratory + other_respiratory,\n         combined_covid19 = covid19_multiple + covid19_underlying)\nnew_data2 &lt;- data2 %&gt;%\n  filter(occurrence == 'United States')\nfig &lt;- plot_ly(type = 'parcoords',\n               line = list(color = as.integer(as.factor(new_data2$date))),\n               dimensions = list(\n                 list(label = 'Septicemia', values = new_data2$septicemia),\n                 list(label = 'Malignant Neoplasms', values = new_data2$malignant_neoplasms),\n                 list(label = 'Diabetes Mellitus', values = new_data2$diabetes_mellitus),\n                 list(label = 'Alzheimer', values = new_data2$alzheimer),\n                 list(label = 'Influenza Pneumonia', values = new_data2$influenza_pneumonia),\n                 list(label = 'Chronic Respiratory', values = new_data2$combined_respiratory),\n                 list(label = 'Nephritis', values = new_data2$nephritis),\n                 list(label = 'Heart Diseases', values = new_data2$heart_diseases),\n                 list(label = 'Cerebrovascular', values = new_data2$cerebrovascular),\n                 list(label = 'COVID-19', values = new_data2$combined_covid19)\n               )) %&gt;% layout(\n  title = \"Parallel Coordinates Plot for Causes of Death\",\n  font = list(size = 9)  \n               )\n\n# Show the plot\nfig"
  },
  {
    "objectID": "results.html#data3-combining",
    "href": "results.html#data3-combining",
    "title": "3  Results",
    "section": "3.8 Data3 combining",
    "text": "3.8 Data3 combining\n\n\nCode\n# Read data3_adult\ndata3_adult &lt;- read.csv(\"data/data3_adult.csv\")\n\n# Change format \"Month_Week\" column (only extract the month)\ndata3_adult$Month_Week &lt;- sub(\" .*\", \"\", data3_adult$Month_Week)\n\n# Read data3_youth\ndata3_youth &lt;- read.csv(\"data/data3_youth.csv\")\n\n# Change format \"Month_Week\" column (only extract the month)\ndata3_youth$Month_Week &lt;- sub(\" .*\", \"\", data3_youth$Month_Week)"
  },
  {
    "objectID": "results.html#boxplot-trendency-by-year-adultyouth",
    "href": "results.html#boxplot-trendency-by-year-adultyouth",
    "title": "3  Results",
    "section": "3.9 Boxplot: trendency by year (adult+youth)",
    "text": "3.9 Boxplot: trendency by year (adult+youth)"
  },
  {
    "objectID": "results.html#spatial-dataone-death-one-vaccination-state-answer-which-state-recive-most-vaccination",
    "href": "results.html#spatial-dataone-death-one-vaccination-state-answer-which-state-recive-most-vaccination",
    "title": "3  Results",
    "section": "3.10 Spatial Data(one death one vaccination-state): answer which state recive most vaccination",
    "text": "3.10 Spatial Data(one death one vaccination-state): answer which state recive most vaccination"
  },
  {
    "objectID": "results.html#mosaic-age-2-state",
    "href": "results.html#mosaic-age-2-state",
    "title": "3  Results",
    "section": "3.11 Mosaic: age, 2 state",
    "text": "3.11 Mosaic: age, 2 state"
  }
]